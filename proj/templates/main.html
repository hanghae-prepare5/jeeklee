<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" ,>


    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>

    <title>OOTDGRAM</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

</head>


<style>
    .all {


    }

    /*ë¡œê³ ì—¬ë°±*/
    .top {
        margin: 20px 20px 20px 20px;
        padding: 0px 0px 0px 0px;
        border-bottom: solid 2px whitesmoke;


    }

    /*ë¡œê³ */
    .logo {
        color: gray;
        height: 60px;
        margin: auto;
        font-size: 35px;
        text-align: center;
        width: 400px;


    }

    /*ë’¤ë¡œê°€ê¸°ë²„íŠ¼*/
    .back-btn {
        border: 10px solid transparent;
        border-radius: 18px;
        font-size: 30px;
        position: fixed;
    }

    /*ìœ ì €ì•„ì´ë””*/
    .userid {
        float: right;
        margin-right: 10%;
        margin-top: 50px;
        margin-left: 8px;
        font-size: 25px;
    }

    /*í”„ë¡œí•„ë²„íŠ¼ ë§ˆì´í˜ì´ì§€ ì´ë™ */
    .profile {
        overflow: hidden;
        float: right;
        width: 135px;
        height: 135px;
        border-radius: 100%;
        border:none;


    }

    /*í”„ë¡œí•„ì‚¬ì§„*/
    .profile-photo {

        width: 130px;

        height: 135px;

        color: red;

        object-fit: cover;
        border-radius: 100px;


    }


    /*ì‚¬ì´ì—¬ë°±*/
    .middle {
        margin-bottom: 255px;

    }

    /*ì •ë ¬ë²„íŠ¼*/
    .npbutton {

        margin-left: 125px;
        margin-bottom: 10px;
        margin-top: 10px;
        width: 95%;
    }

    /*ì •ë ¬ë²„íŠ¼ ìƒë‹¨ ì¤„*/
    .classificaftion {

        width: 100%;
        border-top: solid 2px whitesmoke;


    }

    /*ê²Œì‹œë²„íŠ¼*/
    .upload {
        margin-left: 70%;


        background-color: white;

        border: none;
        font-size: 28px;
    }

    /*ê²Œì‹œë¬¼ë°•ìŠ¤*/
    .posts-box {



    }

    /*ê²Œì‹œë¬¼*/
    .post {
        float: left;
        margin-right: 2%;
        margin-left: 8%;
        margin-top:15px;
        margin-bottom: 15px;
        display: flex;
        flex-wrap:wrap;





    }

    /*ì¢‹ì•„ìš”ë²„íŠ¼*/
    .like {
        border: none;
        background-color: white;
        margin-left: 90%;
        font-size: 23px;
    }

    /*ê²Œì‹œë¬¼ì‚¬ì§„*/
    .card {
        width: 530px;
        height: auto;


    }

</style>

<script>
    $(document).ready(function () {
        show_post();
    });

    function show_post() {
        $.ajax({
            type: "GET",
            url: "/main",
            data: {},
            success: function (response) {
                let rows = response['post_list']
                    console.log(rows)
                for (let i = 0; i < rows.length; i++) {
                    let id = rows[i]['user_pk']
                    let text = rows[i]['text']
                    let tags = rows[i]['tags']
                    let image = rows[i]['image']
                    let write_time = rows[i]['write_date']
                    let like = rows[i]['like']
                    let post = rows[i]['postwrite_pk']

                    let the_present_date = new Date();
                    let posts_write_time = new Date(write_time)
                    let time_comparison = the_present_date.getTime() - posts_write_time.getTime()

                    if ((time_comparison / (1000 * 60)) < 60) {
                        time = (time_comparison / (1000 * 60))
                        temp_time = `${parseInt(time)}ë¶„ ì „`
                    } else if ((time_comparison / (1000 * 60 * 60)) < 24) {
                        time = (time_comparison / (1000 * 60 * 60))
                        temp_time = `${parseInt(time)}ì‹œê°„ ì „`
                    } else {
                        time = (time_comparison / (1000 * 60 * 60 * 24))
                        temp_time = `${parseInt(time)}ì¼ ì „`
                    }

                    let temp_post = `<div id="post" class="post">
                                    <div class="card">
                                <div class="postimg">
                                    <a href='/post/${post}?post=${post}'>
                                        <img class="card-img-top" src=${image}
                                           alt="...">  </div>
                                    </a>
                                <div class="card-body">
                                    <h5 class="card-title">${id}</h5>
                                    <button class="like">â™¡ï¸<h9>${like}</h9></button>
                                    <p class="card-text">${text}</p>
                                    <p class="card-text">  ${tags}   </p>
                                    <p> ${temp_time} </p>
                                </div></div></div>`
                    $('#post').append(temp_post)
                }
            }
        });
    }


</script>


<body>
<div class="all">
    <!--ë¡œê³ -->
    <div style="float:top;" class='top'>
        <h1 class='logo'>í•­í•´99 GRAM</h1>
    </div>
    <!--ë’¤ë¡œê°€ê¸° ë²„íŠ¼-->
{#    <div>#}
{#        <button onclick="history.back()" type="button" class="back-btn">ğŸ”™</button>#}
{#    </div>#}
    <!--ìœ ì €ì•„ì´ë”” ë° í”„ë¡œí•„-->
    <div>
        <h1 class="userid"> {{ user_id }} </h1> <!--comments_id -->
        <!-- comments_profile / ë§ˆì´í˜ì´ì§€ ì´ë™ -->
        <button onclick="location.href='mypage'" class="profile" type="button"><img class="profile-photo"
                                                                                       src="https://newsimg.sedaily.com/2020/11/24/1ZAJ728KBG_1.jpg">
            <!--í”„ë¡œí•„-->
        </button>
    </div>
    <div class="middle"> <!--ì‚¬ì´ê³µë°±-->
    </div>

    <div class="classificaftion">
        <div class="npbutton"> <!--ì •ë ¬ë²„íŠ¼-->
            <button type="button" class="btn btn-success">NEW</button>
            <button type="button" class="btn btn-danger">POPULAR</button>
            <!--ê²Œì‹œë¬¼ ì‘ì„± í˜ì´ì§€ ì´ë™-->
            <button onclick="location.href='postwrite/page'" class="upload" type="button" class="btn btn-dark">â•</button>
        </div>
    </div>
    <!--ê²Œì‹œë¬¼ë°•ìŠ¤-->
<div class="posts-box">
    <div id="post" class="post">

    </div>
</div>


</div>


</div>

</div>
</body>
</html>